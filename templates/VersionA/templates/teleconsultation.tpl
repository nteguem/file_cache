<!DOCTYPE html>
<!--[if IE 8]>
<html class="ie ie8"> <![endif]-->
<!--[if IE 9]>
<html class="ie ie9"> <![endif]-->
<!--[if gt IE 9]><!-->
<html><!--<![endif]-->


<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>Alaxione</title>
    <meta name="keywords" content=""/>
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Set the viewport width to device width for mobile -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <!-- Fav and touch icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="img/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="img/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="img/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="img/ico/apple-touch-icon-57-precomposed.png">
    <link rel="shortcut icon" href="img/ico/favicon.png">


    <!-- CSS -->

    <!-- Bootstrap & FontAwesome & Entypo CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <!--[if IE 7]>
    <link type="text/css" rel="stylesheet" href="css/font-awesome-ie7.min.css"><![endif]-->
    <link href="css/font-entypo.css" rel="stylesheet" type="text/css">

    <!-- Fonts CSS -->
    <link href="css/fonts.css" rel="stylesheet" type="text/css">

    <!-- Plugin CSS -->
    <link href="plugins/jquery-ui/jquery-ui.custom.min.css" rel="stylesheet" type="text/css">
    <link href="plugins/prettyPhoto-plugin/css/prettyPhoto.css" rel="stylesheet" type="text/css">
    <link href="plugins/isotope/css/isotope.css" rel="stylesheet" type="text/css">
    <link href="plugins/pnotify/css/jquery.pnotify.css" media="screen" rel="stylesheet" type="text/css">
    <link href="plugins/google-code-prettify/prettify.css" rel="stylesheet" type="text/css">


    <link href="plugins/mCustomScrollbar/jquery.mCustomScrollbar.css" rel="stylesheet" type="text/css">
    <link href="plugins/tagsInput/jquery.tagsinput.css" rel="stylesheet" type="text/css">
    <link href="plugins/bootstrap-switch/bootstrap-switch.css" rel="stylesheet" type="text/css">
    <link href="plugins/daterangepicker/daterangepicker-bs3.css" rel="stylesheet" type="text/css">
    <link href="plugins/bootstrap-timepicker/bootstrap-timepicker.min.css" rel="stylesheet" type="text/css">
    <link href="plugins/colorpicker/css/colorpicker.css" rel="stylesheet" type="text/css">
    <!-- Specific CSS -->
    <link href="plugins/dataTables/css/jquery.dataTables.min.css" rel="stylesheet" type="text/css">
    <link href="plugins/dataTables/css/dataTables.bootstrap.css" rel="stylesheet" type="text/css">
    <link href="plugins/jquery-file-upload/css/jquery.fileupload.css" rel="stylesheet" type="text/css">
    <link href="plugins/jquery-file-upload/css/jquery.fileupload-ui.css" rel="stylesheet" type="text/css">
    <link href="plugins/bootstrap-wysiwyg/css/bootstrap-wysihtml5-0.0.2.css" rel="stylesheet" type="text/css">
    <link href='plugins/fullcalendar-2.3.1/fullcalendar.css' rel='stylesheet'/>
    <link href='plugins/fullcalendar-2.3.1/fullcalendar.print.css' rel='stylesheet' media='print'/>
    <!-- Theme CSS -->
    <link href="css/theme.css" rel="stylesheet" type="text/css">
    <!--[if IE]>
    <link href="css/ie.css" rel="stylesheet"> <![endif]-->
    <link href="css/chrome.css" rel="stylesheet" type="text/chrome"> <!-- chrome only css -->


    <!-- Responsive CSS -->
    <link href="css/theme-responsive.min.css" rel="stylesheet" type="text/css">


    <!-- for specific page in style css -->

    <!-- for specific page responsive in style css -->


    <!-- Custom CSS -->
    <link href="custom/custom.css" rel="stylesheet" type="text/css">

    {literal}
        <style type="text/css">
            .autocomplete-suggestions {
                border: 1px solid #999;
                background: #FFF;
                overflow: auto;
            }

            .autocomplete-suggestion {
                padding: 2px 5px;
                white-space: nowrap;
                overflow: hidden;
            }

            .autocomplete-selected {
                background: #F0F0F0;
            }

            .autocomplete-suggestions strong {
                font-weight: normal;
                color: #3399FF;
            }

            .vd_menu-search .vd_menu-search-submit2 {
                position: absolute;
                top: 0;
                right: 0;
                background: #27A1C2;
                color: #FFF;
                padding: 2px 8px;
                -webkit-border-radius: 30px;
                -moz-border-radius: 30px;
                border-radius: 30px;
            }

            .vd_menu-search {
                width: 450px;
            }

            select {

                height: 39px;
            }


            .table-responsive {
                overflow-x: auto;
            }


            /**
     * The CSS shown here will not be introduced in the Quickstart guide, but shows
     * how you can use CSS to style your Element's container.
     */
            .StripeElement {
                box-sizing: border-box;

                height: 40px;

                padding: 10px 12px;

                border: 1px solid transparent;
                border-radius: 4px;
                background-color: white;

                box-shadow: 0 1px 3px 0 #e6ebf1;
                -webkit-transition: box-shadow 150ms ease;
                transition: box-shadow 150ms ease;
            }

            .StripeElement--focus {
                box-shadow: 0 1px 3px 0 #cfd7df;
            }

            .StripeElement--invalid {
                border-color: #fa755a;
            }

            .StripeElement--webkit-autofill {
                background-color: #fefde5 !important;
            }
        </style>
        <script src='plugins/fullcalendar-2.3.1/lib/jquery.min.js'></script>
        <!-- Head SCRIPTS -->
        <script type="text/javascript" src="js/modernizr.js"></script>
        <script type="text/javascript" src="js/mobile-detect.min.js"></script>
        <script type="text/javascript" src="js/mobile-detect-modernizr.js"></script>
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
        <script type="text/javascript" src="js/html5shiv.js"></script>
        <script type="text/javascript" src="js/respond.min.js"></script>
        <![endif]-->


        <!-- Javascript =============================================== -->
        <!-- Placed at the end of the document so the pages load faster -->

        <!--[if lt IE 9]>
        <script type="text/javascript" src="js/excanvas.js"></script>
        <![endif]-->
        <script type="text/javascript" src="js/bootstrap.min.js"></script>
        <script type="text/javascript" src='plugins/jquery-ui/jquery-ui.custom.min.js'></script>
        <script type="text/javascript" src="plugins/jquery-ui-touch-punch/jquery.ui.touch-punch.min.js"></script>
        <script type="text/javascript" src="js/caroufredsel.js"></script>
        <script type="text/javascript" src="js/plugins.js"></script>
        <script type="text/javascript" src="js/framwork_js.js"></script>
        <!-- Script pour l'auto-completion -->
        <script type="text/javascript" src="js/jquery.autocomplete.min.js"></script>
        <script type="text/javascript" src="plugins/breakpoints/breakpoints.js"></script>
        <script type="text/javascript" src="plugins/dataTables/jquery.dataTables.min.js"></script>
        <script type="text/javascript" src="plugins/prettyPhoto-plugin/js/jquery.prettyPhoto.js"></script>
        <script type="text/javascript" src="plugins/mCustomScrollbar/jquery.mCustomScrollbar.concat.min.js"></script>
        <script type="text/javascript" src="plugins/tagsInput/jquery.tagsinput.min.js"></script>
        <script type="text/javascript" src="plugins/bootstrap-switch/bootstrap-switch.min.js"></script>
        <script type="text/javascript" src="plugins/blockUI/jquery.blockUI.js"></script>
        <script type="text/javascript" src="plugins/pnotify/js/jquery.pnotify.min.js"></script>
        <script type="text/javascript" src="js/theme.js"></script>
        <script type="text/javascript" src="custom/custom.js"></script>

    {/literal}
</head>

<body id="pages"
      class="full-layout no-nav-left no-nav-right  nav-top-fixed background-login     responsive remove-navbar login-layout   clearfix"
      data-active="pages " data-smooth-scrolling="1">
<div class="vd_body">
    <!-- Header Start -->

    <!-- Header Ends -->
    <div class="content">
        <div class="container">

            <!-- Middle Content Start -->

            <div class="vd_content-wrapper">
                <div class="vd_container">
                    <div class="vd_content clearfix">
                        <div class="vd_content-section clearfix">

                            {if $successMessage!= ""}
                                <div class="alert alert-success"><span class="vd_alert-icon"><i class="fa fa-check-circle vd_green"></i></span>
                                    {$successMessage}
                                </div>

                            {/if}

                            {if $errorMessage!= ""}
                                <div class="alert alert-danger"><span class="vd_alert-icon"><i class="fa fa-exclamation-circle vd_red"></i></span>
                                    {$errorMessage}
                                </div>

                            {/if}

                            {if $successMessage == "" && $errorMessage == "" }
                                <div class="col-md-12">
                                    <div class="panel widget">

                                        <div class="panel-heading vd_bg-blue">
                                            <h3 class="panel-title">Prépaiement de votre Téléconsultation</h3>
                                        </div>
                                        <div class="panel-body" style="background-color: #ffffff">
                                            <form action="" method="post" id="payment-form">
                                                <input type="hidden" id="validation" value="ok">
                                                <input type="hidden" name="cardstripe" id="cardstripe">
                                                <div class="form-row col-md-12">
                                                    <label for="card-element">
                                                        Informations de votre carte de crédit
                                                    </label>
                                                </div>
                                                <div class="form-row col-md-8">
                                                    <div id="card-element"></div>

                                                    <!-- Used to display form errors. -->
                                                    <div id="card-errors" role="alert"></div>
                                                </div>
                                                <div class="form-row col-md-4" style="text-align: center">
                                                    <button class="btn vd_bg-green vd_white width-50">PréPayer</button>
                                                </div>

                                            </form>
                                        </div>
                                    </div>
                                </div>
                            {/if}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript" src="https://js.stripe.com/v3/"></script>
{if $successMessage == "" && $errorMessage == "" }
{literal}
<script>

    // Ceate a Stripe client.
    var stripe = Stripe('{/literal}{$key_stripe}{literal}');

    // Create an instance of Elements.
    var elements = stripe.elements();

    // Custom styling can be passed to options when creating an Element.
    // (Note that this demo uses a wider set of styles than the guide below.)
    var style = {
        base: {
            color: '#32325d',
            fontFamily: '"Helvetica Neue", Helvetica, sans-serif',
            fontSmoothing: 'antialiased',
            fontSize: '16px',
            '::placeholder': {
                color: '#aab7c4'
            }
        },
        invalid: {
            color: '#fa755a',
            iconColor: '#fa755a'
        }
    };

    // Create an instance of the card Element.
    var card = elements.create('card', {style: style});

    // Add an instance of the card Element into the `card-element` <div>.
    card.mount('#card-element');

    // Handle real-time validation errors from the card Element.
    card.addEventListener('change', function (event) {
        var displayError = document.getElementById('card-errors');
        if (event.error) {
            displayError.textContent = event.error.message;
        } else {
            displayError.textContent = '';
        }
    });




    // Handle form submission.
    var form = document.getElementById('payment-form');
    form.addEventListener('submit', function (event) {
        event.preventDefault();
        stripe.createToken(card).then(function (result) {
            if (result.error) {
                // Inform the user if there was an error.
                var errorElement = document.getElementById('card-errors');
                errorElement.textContent = result.error.message;
            } else {
                // Send the token to your server.
                stripeTokenHandler(result.token);
            }
        });
    });

    // Submit the form with the token ID.
    function stripeTokenHandler(token) {
        // Insert the token ID into the form so it gets submitted to the server
        var form = document.getElementById('payment-form');
        var hiddenInput = document.createElement('input');
        hiddenInput.setAttribute('type', 'hidden');
        hiddenInput.setAttribute('name', 'stripeToken');
        hiddenInput.setAttribute('value', token.id);
        form.appendChild(hiddenInput);

        // Submit the form
        form.submit();
    }

</script>
{/literal}


{literal}
<script>
    /*
    // A reference to Stripe.js
    var stripe;

    var orderData = {
    items: [{ id: "photo-subscription" }],
    currency: "usd"
    };

    fetch("/stripe-key")
    .then(function(result) {
    return result.json();
    })
    .then(function(data) {
    return setupElements(data);
    })
    .then(function({ stripe, card, clientSecret }) {
    document.querySelector("#submit").addEventListener("click", function(evt) {
    evt.preventDefault();
    document.querySelector("#submit").disabled = true;
    pay(stripe, card, clientSecret);
    document.querySelector("#submit").disabled = false;
    });
    });

    var setupElements = function(data) {
    stripe = Stripe({/literal}{$key_stripe}{literal});

    var elements = stripe.elements();
    var style = {
    base: {
    color: "#32325d",
    fontFamily: '"Helvetica Neue", Helvetica, sans-serif',
    fontSmoothing: "antialiased",
    fontSize: "16px",
    "::placeholder": {
    color: "#aab7c4"
    }
    },
    invalid: {
    color: "#fa755a",
    iconColor: "#fa755a"
    }
    };

    var card = elements.create("card", { style: style });
    card.mount("#card-element");

    return {
    stripe,
    card,
    clientSecret: data.clientSecret
    };
    };

    var handleAction = function(clientSecret) {
    stripe.handleCardAction(clientSecret).then(function(data) {
    if (data.error) {
    showError("Your card was not authenticated, please try again");
    } else if (data.paymentIntent.status === "requires_confirmation") {
    fetch("/pay", {
    method: "POST",
    headers: {
    "Content-Type": "application/json"
    },
    body: JSON.stringify({
    paymentIntentId: data.paymentIntent.id
    })
    })
    .then(function(result) {
    return result.json();
    })
    .then(function(json) {
    if (json.error) {
    showError(json.error);
    } else {
    orderComplete(clientSecret);
    }
    });
    }
    });
    };


    var pay = function(stripe, card) {
    var cardholderName = document.querySelector("#name").value;
    var data = {
    billing_details: {}
    };

    if (cardholderName) {
    data["billing_details"]["name"] = cardholderName;
    }

    // Initiate the payment. handleCardPayment will display a modal
    stripe
    .createPaymentMethod("card", card, data)
    .then(function(result) {
    if (result.error) {
    showError(result.error.message);
    } else {
    orderData.paymentMethodId = result.paymentMethod.id;

    return fetch("/pay", {
    method: "POST",
    headers: {
    "Content-Type": "application/json"
    },
    body: JSON.stringify(orderData)
    });
    }
    })
    .then(function(result) {
    return result.json();
    })
    .then(function(paymentData) {
    if (paymentData.requiresAction) {
    // Request authentication
    handleAction(paymentData.clientSecret);
    } else if (paymentData.error) {
    showError(paymentData.error);
    } else {
    orderComplete(paymentData.clientSecret);
    }
    });
    };


    var orderComplete = function(clientSecret) {
    stripe.retrievePaymentIntent(clientSecret).then(function(result) {
    var paymentIntent = result.paymentIntent;
    var paymentIntentJson = JSON.stringify(paymentIntent, null, 2);
    document.querySelectorAll(".payment-view").forEach(function(view) {
    view.classList.add("hidden");
    });
    document.querySelectorAll(".completed-view").forEach(function(view) {
    view.classList.remove("hidden");
    });
    document.querySelector(".order-status").textContent =
    paymentIntent.status === "succeeded" ? "succeeded" : "failed";
    document.querySelector("pre").textContent = paymentIntentJson;
    });
    };

    var showError = function(errorMsgText) {
    var errorMsg = document.querySelector(".sr-field-error");
    errorMsg.textContent = errorMsgText;
    setTimeout(function() {
    errorMsg.textContent = "";
    }, 4000);
    };

    // Hide banner if window is too small or in iframe
    if (window.outerHeight < 600 || window.location !== window.parent.location) {
    document.querySelector(".banner").classList.add("hidden");
    }
*/
</script>
{/literal}
{/if}
</body>
</html>