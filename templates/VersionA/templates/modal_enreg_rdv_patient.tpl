<!DOCTYPE html>
<!--[if IE 8]>      <html class="ie ie8"> <![endif]-->
<!--[if IE 9]>      <html class="ie ie9"> <![endif]-->
<!--[if gt IE 9]><!-->  <html><!--<![endif]-->

<!-- Specific Page Data -->
<!-- End of Data -->

<head>
    <meta charset="utf-8" />
    <title>Alaxione</title>
    <meta name="keywords" content="" />
    <meta name="description" content="">
    <meta name="author" content="">
    <meta HTTP-EQUIV="cache-control" CONTENT="NO-CACHE">
    <meta HTTP-EQUIV="pragma" CONTENT="NO-CACHE">

    <!-- Set the viewport width to device width for mobile -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">    
    
    
    <!-- Fav and touch icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="img/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="img/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="img/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="img/ico/apple-touch-icon-57-precomposed.png">
    <link rel="shortcut icon" href="img/ico/favicon.png">
    
    
    <!-- CSS -->
       
    <!-- Bootstrap & FontAwesome & Entypo CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <!--[if IE 7]><link type="text/css" rel="stylesheet" href="css/font-awesome-ie7.min.css"><![endif]-->
    <link href="css/font-entypo.css" rel="stylesheet" type="text/css">    

    <!-- Fonts CSS -->
    <link href="css/fonts.css"  rel="stylesheet" type="text/css">
               
    <!-- Plugin CSS -->
    <link href="plugins/jquery-ui/jquery-ui.custom.min.css" rel="stylesheet" type="text/css">    
    <link href="plugins/prettyPhoto-plugin/css/prettyPhoto.css" rel="stylesheet" type="text/css">
    <link href="plugins/isotope/css/isotope.css" rel="stylesheet" type="text/css">
    <link href="plugins/pnotify/css/jquery.pnotify.css" media="screen" rel="stylesheet" type="text/css">    
  <link href="plugins/google-code-prettify/prettify.css" rel="stylesheet" type="text/css"> 
   
         
    <link href="plugins/mCustomScrollbar/jquery.mCustomScrollbar.css" rel="stylesheet" type="text/css">
    <link href="plugins/tagsInput/jquery.tagsinput.css" rel="stylesheet" type="text/css">
    <link href="plugins/bootstrap-switch/bootstrap-switch.css" rel="stylesheet" type="text/css">    
    <link href="plugins/daterangepicker/daterangepicker-bs3.css" rel="stylesheet" type="text/css">    
    <link href="plugins/bootstrap-timepicker/bootstrap-timepicker.min.css" rel="stylesheet" type="text/css">
    <link href="plugins/colorpicker/css/colorpicker.css" rel="stylesheet" type="text/css">       

    <!-- Theme CSS -->
    <link href="css/theme.min.css" rel="stylesheet" type="text/css">
    <!--[if IE]> <link href="css/ie.css" rel="stylesheet" > <![endif]-->
    <link href="css/chrome.css" rel="stylesheet" type="text/chrome"> <!-- chrome only css -->    


        
    <!-- Responsive CSS -->
          <link href="css/theme-responsive.min.css" rel="stylesheet" type="text/css"> 

    
 
 
    <!-- for specific page in style css -->
        
    <!-- for specific page responsive in style css -->
        
    
    <!-- Custom CSS -->
    <link href="custom/custom.css" rel="stylesheet" type="text/css">


    <!-- Javascript =============================================== --> 
    <!-- Placed at the end of the document so the pages load faster --> 
    <?php $jQuery_9 = filemtime(PATH_ASSETS.'js/jquery.js') ?>
<script type="text/javascript" src="js/jquery.<?php echo $jQuery_9 ?>.js"></script>

    <!--[if lt IE 9]>
      <script type="text/javascript" src="js/excanvas.js"></script>      
    <![endif]-->
    <?php $bootstrapMin_09 = filemtime(PATH_ASSETS.'js/bootstrap.min.js') ?>
<script type="text/javascript" src="js/bootstrap.min.<?php echo $bootstrapMin_09 ?>.js"></script>
    <?php $customMin_09 = filemtime(PATH_ASSETS.'plugins/jquery-ui/jquery-ui.custom.min.js') ?>
<script type="text/javascript" src='plugins/jquery-ui/jquery-ui.custom.min.<?php echo $customMin_09 ?>.js'></script>
    <?php $touchPunch_09 = filemtime(PATH_ASSETS.'plugins/jquery-ui-touch-punch/jquery.ui.touch-punch.min.js') ?>
<script type="text/javascript" src="plugins/jquery-ui-touch-punch/jquery.ui.touch-punch.min.<?php echo $touchPunch_09 ?>.js"></script>
    <?php $caroufRed_009 = filemtime(PATH_ASSETS.'js/caroufredsel.js') ?>
<script type="text/javascript" src="js/caroufredsel.<?php echo $caroufRed_009 ?>.js"></script>
    <?php $plugins_09 = filemtime(PATH_ASSETS.'js/plugins.js') ?>
<script type="text/javascript" src="js/plugins.<?php echo $plugins_09 ?>.js"></script>
    <?php $breackPoint_09 = filemtime(PATH_ASSETS.'plugins/breakpoints/breakpoints.js') ?>
<script type="text/javascript" src="plugins/breakpoints/breakpoints.<?php echo $breackPoint_09 ?>.js"></script>
    <?php $dataTables_09 = filemtime(PATH_ASSETS.'plugins/dataTables/jquery.dataTables.min.js') ?>
<script type="text/javascript" src="plugins/dataTables/jquery.dataTables.min.<?php echo $dataTables_09 ?>.js"></script>
    <?php $prettyPhoto_09 = filemtime(PATH_ASSETS.'plugins/prettyPhoto-plugin/js/jquery.prettyPhoto.js') ?>
<script type="text/javascript" src="plugins/prettyPhoto-plugin/js/jquery.prettyPhoto.<?php echo $prettyPhoto_09 ?>.js"></script>
    <?php $contactMin_09 = filemtime(PATH_ASSETS.'plugins/mCustomScrollbar/jquery.mCustomScrollbar.concat.min.js') ?>
<script type="text/javascript" src="plugins/mCustomScrollbar/jquery.mCustomScrollbar.concat.min.<?php echo $contactMin_09 ?>.js"></script>
    <?php $tagsInput_09 = filemtime(PATH_ASSETS.'plugins/tagsInput/jquery.tagsinput.min.js') ?>
<script type="text/javascript" src="plugins/tagsInput/jquery.tagsinput.min.<?php echo $tagsInput_09 ?>.js"></script>
    <?php $bootStrap_09 = filemtime(PATH_ASSETS.'plugins/bootstrap-switch/bootstrap-switch.min.js') ?>
<script type="text/javascript" src="plugins/bootstrap-switch/bootstrap-switch.min.<?php echo $bootStrap_09 ?>.js"></script>
    <?php $blockUi_09 = filemtime(PATH_ASSETS.'plugins/blockUI/jquery.blockUI.js') ?>
<script type="text/javascript" src="plugins/blockUI/jquery.blockUI.<?php echo $blockUi_09 ?>.js"></script>
    <?php $pnotify_09 = filemtime(PATH_ASSETS.'plugins/pnotify/js/jquery.pnotify.min.js') ?>
<script type="text/javascript" src="plugins/pnotify/js/jquery.pnotify.min.<?php echo $pnotify_09 ?>.js"></script>

    <?php $theme_09 = filemtime(PATH_ASSETS.'js/theme.js') ?>
    <script type="text/javascript" src="js/theme.<?php echo $theme_09 ?>.js"></script>
    <?php $customCustom_09 = filemtime(PATH_ASSETS.'custom/custom.js') ?>
    <script type="text/javascript" src="custom/custom.<?php echo $customCustom_09 ?>.js"></script>

    <?php $maskedIput_09 = filemtime(PATH_ASSETS.'js/jquery.maskedinput.min.js') ?>
    <script type="text/javascript" src="js/jquery.maskedinput.min.<?php echo $maskedIput_09 ?>.js"></script> 
     
    <!-- Specific Page Scripts Put Here -->
    <?php $wizardMin_09 = filemtime(PATH_ASSETS.'plugins/bootstrap-wizard/jquery.bootstrap.wizard.min.js') ?>
    <script type="text/javascript" src='plugins/bootstrap-wizard/jquery.bootstrap.wizard.min.<?php echo $wizardMin_09 ?>.js'></script>

    <?php $frPicked_09 = filemtime(PATH_ASSETS.'js/datepicker-fr.js') ?>
    <script type="text/javascript" src="js/datepicker-fr.<?php $frPicked_09 ?>.js"></script>
    <!-- Head SCRIPTS -->
    <?php $modernizr_09 = filemtime(PATH_ASSETS.'js/modernizr.js') ?>
    <script type="text/javascript" src="js/modernizr.<?php echo $modernizr_09 ?>.js"></script>
        <?php $mobileDetectMin_09 = filemtime(PATH_ASSETS.'js/mobile-detect.min.js') ?>
<script type="text/javascript" src="js/mobile-detect.min.<?php echo $mobileDetectMin_09 ?>.js"></script>
        <?php $mobileDetectMdernizr_09 = filemtime(PATH_ASSETS.'js/mobile-detect-modernizr.js') ?>
<script type="text/javascript" src="js/mobile-detect-modernizr.<?php echo $mobileDetectMdernizr_09 ?>.js"></script>09
    
<?php $compteWidget_09 = filemtime(PATH_ASSETS.'js/compte_widget.js') ?>
    <script type="text/javascript" src="js/compte_widget.<?php echo $compteWidget_09 ?>.js"></script>     
   <!-- Script pour l'auto-completion -->
   <?php $autoCompleMin_09 = filemtime(PATH_ASSETS.'js/jquery.autocomplete.min.js') ?>
    <script type="text/javascript" src="js/jquery.autocomplete.min.<?php echo $autoCompleMin_09 ?>.js"></script>


    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script type="text/javascript" src="js/html5shiv.js"></script>
      <script type="text/javascript" src="js/respond.min.js"></script>     
    <![endif]-->

{literal}
<script type="text/javascript">

$(document).ready(function() {
  $("#idaff_telport").mask("99 99 99 99 99");
  $("#idaff_telfixe").mask("99 99 99 99 99");
  $("#num_secu_mod_up").mask("9 99 99 9* 999 999 99");
  $("#id_datenaissance").mask("99/99/9999");
  $("#id_daterdv").mask("99/99/9999");
  $("#heuredebut").mask("99:99");
  $("#heurepatient").mask("99:99");
  $("#code_postal_mod_up").mask("99999");


});

function civiliteWidget(sCivilite, sDiv){

    var $tmpdivnomjeunefille = $("#"+sDiv);

    if(sCivilite=="Mme"){
        $tmpdivnomjeunefille.show();
    }else{
        $tmpdivnomjeunefille.hide();
    }

    return false;
}

var plus_motif_rdv = true;

function checkInsee(myInseeField) {
    var isValid = true;
    var expression = new RegExp('^[12]\\d{14}$');
    myInseeField.style.backgroundColor = 'white';

    var txtSansEspace = myInseeField.value;
    txtSansEspace = txtSansEspace.replace(/ /g,"");

    if (!txtSansEspace.match(expression))
    {
      isValid = false;
      myInseeField.style.backgroundColor = '#efcfcd';
    } else {
      var partialInsee = txtSansEspace.toString().substring(0, 13);
      var clef = 97 - (parseFloat(partialInsee) % 97);

      if(clef != parseInt(txtSansEspace.toString().substring(13, 15), 10))
      {
          isValid = false;
          myInseeField.style.backgroundColor = '#efcfcd';
      }
  }
    return isValid;
}
/*
function civiliteClickModal(myRadioCompte){
  var divnomjeunefille_mod_up = document.getElementById('divnomjeunefille_mod_up');
  var smyRadioCompte = document.getElementById(myRadioCompte);

  if(myRadioCompte.value=="Mme"){
    divnomjeunefille_mod_up.style.display = "";
    $('input:radio[name="civilite_mod_up"]').filter('[value="M"]').attr('checked', false);
    $('input:radio[name="civilite_mod_up"]').filter('[value="Mme"]').attr('checked', true);
    
   }else{
    divnomjeunefille_mod_up.style.display = "none";
    $('input:radio[name="civilite_mod_up"]').filter('[value="Mme"]').attr('checked', false);
    $('input:radio[name="civilite_mod_up"]').filter('[value="M"]').attr('checked', true);
    
   }

}
*/
function modif_patient(){
    var div_button_base = document.getElementById('div_button_base');
    var div_button_update_patient = document.getElementById('div_button_update_patient');
    var div_reinit = document.getElementById('div_reinit');

    document.getElementById('idaff_nom').removeAttribute("disabled");
    document.getElementById('nom_fille_mod_up').removeAttribute("disabled");
    document.getElementById('idaff_prenon').removeAttribute("disabled");
    document.getElementById('idaff_telport').removeAttribute("disabled");
    document.getElementById('idaff_telfixe').removeAttribute("disabled");
    document.getElementById('idaff_email').removeAttribute("disabled");
    document.getElementById('id_datenaissance').removeAttribute("disabled");
    document.getElementById('civilite_mod_up').removeAttribute("disabled");
    //document.getElementById('civilite_mod_up1').removeAttribute("disabled");
    //document.getElementById('civilite_mod_up2').removeAttribute("disabled");
    document.getElementById('adresse_mod_up').removeAttribute("disabled");
    document.getElementById('code_postal_mod_up').removeAttribute("disabled");
    document.getElementById('ville_mod_up').removeAttribute("disabled");
    document.getElementById('num_secu_mod_up').removeAttribute("disabled");
    document.getElementById('selectassurance').removeAttribute("disabled");
    document.getElementById('medecintrait').removeAttribute("disabled");
    document.getElementById('ville_medecin_mod_up').removeAttribute("disabled");
    document.getElementById('profession_mod_up').removeAttribute("disabled");

    div_button_base.style.display = "none";
    //div_reinit.style.display = "none";
    div_button_update_patient.style.display = "";

}

function reinit_form(){

    document.getElementById('id_patient').value = '';

    document.getElementById('idaff_nom').value = '';
    document.getElementById('nom_fille_mod_up').value = '';
    document.getElementById('idaff_prenon').value = '';
    document.getElementById('idaff_telport').value = '';
    document.getElementById('idaff_telfixe').value = '';
    document.getElementById('idaff_email').value = '';
    document.getElementById('id_datenaissance').value = '';
    document.getElementById('adresse_mod_up').value = '';
    document.getElementById('code_postal_mod_up').value = '';
    document.getElementById('ville_mod_up').value = '';
    document.getElementById('num_secu_mod_up').value = '';
    document.getElementById('selectassurance').value = '';
    document.getElementById('medecintrait').value = '';
    document.getElementById('ville_medecin_mod_up').value = '';
    document.getElementById('profession_mod_up').value = '';
    document.getElementById('remarque').value = '';


    document.getElementById('idaff_nom').removeAttribute("disabled");
    document.getElementById('nom_fille_mod_up').removeAttribute("disabled");
    document.getElementById('idaff_prenon').removeAttribute("disabled");
    document.getElementById('idaff_telport').removeAttribute("disabled");
    document.getElementById('idaff_telfixe').removeAttribute("disabled");
    document.getElementById('idaff_email').removeAttribute("disabled");
    document.getElementById('id_datenaissance').removeAttribute("disabled");
    document.getElementById('civilite_mod_up').removeAttribute("disabled");
    //document.getElementById('civilite_mod_up1').removeAttribute("disabled");
    //document.getElementById('civilite_mod_up2').removeAttribute("disabled");
    document.getElementById('adresse_mod_up').removeAttribute("disabled");
    document.getElementById('code_postal_mod_up').removeAttribute("disabled");
    document.getElementById('ville_mod_up').removeAttribute("disabled");
    document.getElementById('num_secu_mod_up').removeAttribute("disabled");
    document.getElementById('selectassurance').removeAttribute("disabled");
    document.getElementById('medecintrait').removeAttribute("disabled");
    document.getElementById('ville_medecin_mod_up').removeAttribute("disabled");
    document.getElementById('profession_mod_up').removeAttribute("disabled");
    //document.getElementById('remarque').removeAttribute("disabled");

    var div_reinit = document.getElementById('div_reinit');
    var div_button_base = document.getElementById('div_button_base');
    var div_button_update_patient = document.getElementById('div_button_update_patient');
    div_reinit.style.display = "none";

    div_button_base.style.display = "";
    div_button_update_patient.style.display = "none";

    $('#civilite_mod_up').val("");

    $('#selectassurance').empty();
    $('#selectassurance').append('<option value="">Choisissez votre assurance</option>');
  $.ajax({
    url: 'ajax/liste_assurance.php',
    dataType: 'json',
    success: function(json) {
      $.each(json, function(index, value) {
        $('#selectassurance').append('<option value="'+ value.id_assurance_maladie +'">'+ value.libelle_assurance_maladie +'</option>');
      });
    }
  });
}

$(document).ready(function() {
    var div_button_base = document.getElementById('div_button_base');
    var div_button_update_patient = document.getElementById('div_button_update_patient');
    var div_reinit = document.getElementById('div_reinit');

    $("#updateButtonvalide").attr("disabled", false);
    $("#updateButton1").attr("disabled", false);
/*
    $("#updateButtonvalide").click(function () {
        $("#updateButtonvalide").attr("disabled", true);
        $("#updateButton1").attr("disabled", true);
        $('#form_enreg_rdv').submit();
    });
    */
    $("#form_enreg_rdv").submit( function() {
        $("#updateButtonvalide").attr("disabled", true);
        $("#updateButton1").attr("disabled", true);
        //return false;
        //$('#form_enreg_rdv').submit();

    });

      $('#selectassurance').empty();
      $('#selectassurance').append('<option value="">Choisissez votre assurance</option>');
      $.ajax({
        url: 'ajax/liste_assurance.php',
        dataType: 'json',
        success: function(json) {
          $.each(json, function(index, value) {
            $('#selectassurance').append('<option value="'+ value.id_assurance_maladie +'">'+ value.libelle_assurance_maladie +'</option>');
          });
        }
      });


    $( "#updateButtonPatient" ).click(function() {

        $.ajax({
            cache: false,
            url: 'ajax/modif_patient.php',
            data: 'id_patient='+$('#id_patient').val()+'&nom_mod_up='+$('#idaff_nom').val()+'&nom_fille_mod_up='+$('#nom_fille_mod_up').val()
            +'&prenom_mod_up='+$('#idaff_prenon').val()+'&tel_mod_up='+$('#idaff_telport').val()+'&tel_fixe_mod_up='+$('#idaff_telfixe').val()
            +'&email_mod_up='+$('#idaff_email').val()+'&date_naissance_mod_up='+$('#id_datenaissance').val()+'&adresse_mod_up='+$('#adresse_mod_up').val()
            +'&code_postal_mod_up='+$('#code_postal_mod_up').val()+'&ville_mod_up='+$('#ville_mod_up').val()+'&num_secu_mod_up='+$('#num_secu_mod_up').val()
            +'&selectassurance='+$('#selectassurance').val()+'&medecin_traitant_mod_up='+$('#medecintrait').val()+'&ville_medecin_mod_up='+$('#ville_medecin_mod_up').val()
            +'&profession_mod_up='+$('#profession_mod_up').val()+'&remarque='+$('#remarque').val()+'&civilite_mod_up='+$('#civilite_mod_up').val(),
            dataType: 'json',
            success: function(json) {
                $.each(json, function(index, value) {
                    if(value.success = true){
                        //div_reinit.style.display = "";
                        document.getElementById('idaff_prenon').disabled = 'disabled';
                        document.getElementById('idaff_nom').disabled = 'disabled';
                        document.getElementById('nom_fille_mod_up').disabled = 'disabled';
                        document.getElementById('idaff_telport').disabled = 'disabled';
                        document.getElementById('idaff_telfixe').disabled = 'disabled';
                        document.getElementById('idaff_email').disabled = 'disabled';
                        document.getElementById('id_datenaissance').disabled = 'disabled';
                        document.getElementById('civilite_mod_up').disabled = 'disabled';
                        //document.getElementById('civilite_mod_up1').disabled = 'disabled';
                        //document.getElementById('civilite_mod_up2').disabled = 'disabled';
                        document.getElementById('adresse_mod_up').disabled = 'disabled';
                        document.getElementById('code_postal_mod_up').disabled = 'disabled';
                        document.getElementById('ville_mod_up').disabled = 'disabled';
                        document.getElementById('num_secu_mod_up').disabled = 'disabled';
                        document.getElementById('selectassurance').disabled = 'disabled';
                        document.getElementById('medecintrait').disabled = 'disabled';
                        document.getElementById('ville_medecin_mod_up').disabled = 'disabled';
                        document.getElementById('profession_mod_up').disabled = 'disabled';
                        div_button_base.style.display = "";
                        div_button_update_patient.style.display = "none";
                    }else{
                       alert(value.message);
                    }
                });

            }
        });

        return false;
    });
});

</script>

    <style type="text/css">
      @media (min-width: 768px) {
        .modal-dialog {
          width:700px;
        }
      }

      .vd_bg-color {
        background-color: #5D9AD4 !important;
      }

      a {
        color: #5D9AD4;
      }

      a:hover {
        color: #5D9AD4;
      }

      .vd_radio.radio-success input[type=radio]:checked+label:before {
        border: 1px solid #5D9AD4;
      }

      .vd_radio.radio-success label:after {
        background-color: #5D9AD4;
        border: 1px solid #5D9AD4;
      }

      .ui-datepicker {
        background: #5D9AD4;
      }

      .ui-datepicker a {
        color: #fff;
      }

      select:disabled {
        background-color: rgb(235, 235, 228);
      }

    </style>

      <style type="text/css">
        .autocomplete-suggestions { border: 1px solid #999; background: #FFF; overflow: auto; }
        .autocomplete-suggestion { padding: 2px 5px; white-space: nowrap; overflow: hidden; }
        .autocomplete-selected { background: #F0F0F0; }
        .autocomplete-suggestions strong { font-weight: normal; color: #3399FF; }
        select {
          
          height: 39px;
        }
    </style>

{/literal}


</head>    

<body id="forms" class="full-layout no-nav-left no-nav-right nav-top-fixed background-login responsive remove-navbar login-layout clearfix" data-active="forms "  data-smooth-scrolling="1">

  <div class="col-sm-12" style="padding-top:10px;">
      {if $bremplacant}
          <div class="alert alert-warning">
              <span class="vd_alert-icon"><i class="fa fa-exclamation-circle vd_red"></i></span>
              {$smessageremplacant}
          </div>
      {/if}


    {*{if $bsucess}
      <div class="alert alert-success">
        <button type="button" class="close" data-dismiss="alert" aria-hidden="true"><i class="icon-cross"></i></button>
        <span class="vd_alert-icon"><i class="fa fa-check-circle vd_green"></i></span>
        {$sMessageSucess}
      </div>
    {/if}*}
    {if $berror}
      <div class="alert alert-danger">
        <button type="button" class="close" data-dismiss="alert" aria-hidden="true"><i class="icon-cross"></i></button>
        <span class="vd_alert-icon"><i class="fa fa-exclamation-circle vd_red"></i></span>
        {$sMessageError}
      </div>
    {/if}
<form action="" method="GET" class="form-horizontal" id="form_enreg_rdv">
     {if $bwarming}
      <div class="alert alert-warning">
        <button type="button" class="close" data-dismiss="alert" aria-hidden="true"><i class="icon-cross"></i></button>
        <span class="vd_alert-icon"><i class="fa fa-exclamation-circle vd_red"></i></span>
        {$sMessagewarning}
      </div>
    {/if}

     {if $bsucess}
  {literal}
   <script type="text/javascript">
   parent.close_modal_principal('', '', '');
  
    </script>
   {/literal}
  {/if}

  <script type="text/javascript">
  
   var tableau_data = [];
   var tableau_autre = [];

    {foreach from=$aTabTypeRDV item=objTypeRDV}
      tableau_data['{$objTypeRDV.id_type_rdv}']='{$objTypeRDV.tmprdv}';
    {/foreach}

    {foreach from=$aTableauListeTypeAutreRDV item=objTypeAutreRDV}
       tableau_data['{$objTypeAutreRDV.id_type_rdv}']='{$objTypeAutreRDV.tmprdv}';
       tableau_autre['{$objTypeAutreRDV.id_type_rdv}']='{$objTypeAutreRDV.libelle_type_rdv}';
    {/foreach}

    {literal}

    function select_tmp(lavaleur){
      //console.log(tableau_data[lavaleur]);
     // console.log($('#idtpsconsultation').val());
      $('#idtpsconsultation').val(tableau_data[lavaleur]);
    }

    function ajout_tout_rdv(){
      //console.log('guy');
      for(var key in tableau_autre){
       $('#idtyperdv').append('<option value="'+key+'">'+ tableau_autre[key] +'</option>');
      }
    }

    {/literal}
    </script>

    {if $bpasse}
      
        <input type="hidden" name="validation" value="ok">
        <input type="hidden" name="idcalendar" value="{$idcalendar}">
        <input type="hidden" name="etape" value="1" id="id_etape">
        <div class="form-group">
          <div class="col-sm-6 controls">
              {if $bblocageall}
                  {foreach from=$atabPraticien item=objPraticien}
                      {if $iddocteur eq $objPraticien.id_user}
                          <b>{$objPraticien.prenom_user} {$objPraticien.nom_user}</b>
                          <input type="hidden" name="iddocteur" value="{$objPraticien.id_user}">
                      {/if}
                  {/foreach}
              {else}
            <select name="iddocteur" required {if $binterpro}readonly="readonly"{/if}>
              {if !$binterpro}
                 <option value="">Choisir un praticien</option>
              {/if}
              {foreach from=$atabPraticien item=objPraticien}

                {if $binterpro}
                    {if $iddocteur eq $objPraticien.id_user}
                       <option value="{$objPraticien.id_user}" {if $iddocteur eq $objPraticien.id_user}selected="selected"{/if}>{$objPraticien.prenom_user} {$objPraticien.nom_user}</option>
                    {/if}
                {else}
                   <option value="{$objPraticien.id_user}" {if $iddocteur eq $objPraticien.id_user}selected="selected"{/if}>{$objPraticien.prenom_user} {$objPraticien.nom_user}</option>
                {/if}
              {/foreach}
            </select>
              {/if}
          </div>
          <div class="col-sm-6 controls">
              {if $bblocageall}
                  {foreach from=$aTabTypeRDV item=objTypeRDV}
                      {if $idtyperdv eq $objTypeRDV.id_type_rdv}
                         <b> Motif RDV </b>:&nbsp;{$objTypeRDV.libelle_type_rdv}
                          <input type="hidden" name="idtyperdv" value="{$objTypeRDV.id_type_rdv}">
                      {/if}
                  {/foreach}
              {else}

              <select name="idtyperdv" id="idtyperdv" required onchange="select_tmp(this.value)">
                {if !$binterpro}
                <option value="">Choisir un motif de RDV</option>
              {/if}
               {foreach from=$aTabTypeRDV item=objTypeRDV}
                {if $binterpro}
                    {if $idtyperdv eq $objTypeRDV.id_type_rdv}
                      <option value="{$objTypeRDV.id_type_rdv}" {if $idtyperdv eq $objTypeRDV.id_type_rdv}selected="selected"{/if}>{$objTypeRDV.libelle_type_rdv}</option>
                    {/if}
                {else}
                  <option value="{$objTypeRDV.id_type_rdv}" {if $idtyperdv eq $objTypeRDV.id_type_rdv}selected="selected"{/if}>{$objTypeRDV.libelle_type_rdv}</option>
                {/if}
               {/foreach}
            </select>
              {/if}
          </div>
        </div>

         <div class="form-group">
            <div class="col-sm-6 controls">


                {if $bblocageall}
                    {foreach from=$aTabLieu item=aItemLieu}
                        {if $idlieu eq $aItemLieu.id_lieux}
                            <b>{$aItemLieu.nom_lieux}</b>
                            <input type="hidden" name="idlieu" value="{$aItemLieu.id_lieux}">
                        {/if}
                    {/foreach}
                {else}
                <select name="idlieu" required>
              {if !$binterpro}
                <option value="">Choisir un lieu de RDV</option>
              {/if}
              {foreach from=$aTabLieu item=aItemLieu}
                {if $binterpro}
                  {if $idlieu eq $aItemLieu.id_lieux}
                      <option value="{$aItemLieu.id_lieux}" {if $idlieu eq $aItemLieu.id_lieux}selected="selected"{/if} {if $bblocageall} disabled {/if}>{$aItemLieu.nom_lieux}</option>
                  {/if}
                {else}
                       <option value="{$aItemLieu.id_lieux}" {if $idlieu eq $aItemLieu.id_lieux}selected="selected"{/if} {if $bblocageall} disabled {/if}>{$aItemLieu.nom_lieux}</option>
                {/if}
              {/foreach}
                {/if}
            </select>
          </div>
            <div class="col-sm-6 controls">
                {if !$bblocageall}
                    {if !$bblocagetyperdv}
                        <button type="button" name="plusRdvButton" id="plusRdvButton" class="btn vd_btn vd_bg-green" onclick="if(plus_motif_rdv)ajout_tout_rdv();plus_motif_rdv=false"><span class="menu-icon"></span>Plus de motifs de RDV</button>&nbsp;&nbsp;
                    {/if}
                {/if}
            </div>
        </div>

         
        <div class="form-group">
          <div class="col-sm-3 controls">
            <label class="control-label">Date</label>
            <div class="input-group">
                {if $bblocageall}

                    <input type="text" name="ladate" id="id_daterdvinterpro" value="{$ladate}" readonly="readonly">
                {else}
                  {if $binterpro}
                    <input type="text" name="ladate" id="id_daterdvinterpro" value="{$ladate}" readonly="readonly">
                  {else}
                  <input type="text" name="ladate" id="id_daterdv" value="{$ladate}" readonly="readonly">
                  <span class="input-group-addon" id="datepicker-icon-trigger" data-datepicker="#id_daterdv"><i class="fa fa-calendar"></i></span>
                  {/if}
               {/if}
            </div>
            {literal}
            <script type="text/javascript">
              $(document).ready(function() {
                $( "#id_daterdv" ).datepicker({ dateFormat: 'dd/mm/yy',changeMonth: true,changeYear: true,yearRange: "-0:+10"});
                $( '[data-datepicker]' ).click(function(e){ 
                  var data=$(this).data('datepicker');
                  $(data).focus();
                });
              });
            </script>
            {/literal}
          </div>
          <div class="col-sm-3">
          <label class="control-label">Heure patient</label>
          <div class="controls">
            <input type="text" name="heurepatient" id="heurepatient" value="{$heurepatient}" {if $binterpro or $bblocageall}readonly="readonly"{/if}>
          </div>
        </div>
          <div class="col-sm-3 controls">
            <label class="control-label">Heure réelle</label>
             <div class="controls">
            <input type="text" name="heuredebut" id="heuredebut" value="{$heuredebut}" {if $binterpro or $bblocageall}readonly="readonly"{/if}>
          </div>
          </div>
          <div class="col-sm-3">
            <label class="control-label">Durée&nbsp;</label>
            <div class="controls">
              <select name="tpsconsultation" id="idtpsconsultation" >
                {foreach from=$atabtpsConsult item=objTpsConsult}
                   {if $binterpro}
                      {if $tpsconsultation eq $objTpsConsult.value}
                         <option value="{$objTpsConsult.value}" {if $tpsconsultation eq $objTpsConsult.value}selected="selected" {else} {if $boplus  or $bblocageall} disabled {/if}{/if} >{$objTpsConsult.nom}</option>
               
                      {/if}
                    {else}
                    <option value="{$objTpsConsult.value}" {if $tpsconsultation eq $objTpsConsult.value}selected="selected" {else} {if $boplus  or $bblocageall} disabled {/if}{/if} >{$objTpsConsult.nom}</option>
                  {/if}
                {/foreach}
              </select>
            </div>
          </div>
        </div>
    <hr>
        <div class="form-group" style="margin-bottom: 5px;">
            <div class="col-sm-12 controls" >
                <h3>Informations du patient</h3>
            </div>
        </div>

        <div class="form-group" style="margin-bottom: 5px;">
          <div class="col-sm-12 controls" style="display:none;" id="div_reinit">
              <a href="#" onclick="modif_patient();"><i class="fa fa-pencil"></i> Modifier la fiche patient</a> - <a href='#' onclick="reinit_form();" >Réinitialiser</a>
          </div>
        </div>
        <div class="form-group">
            <div class="col-sm-3 controls">
                <div class="vd_input-wrapper" style="background-color:#fff;">
                    <select name="civilite_mod_up" id="civilite_mod_up" required onchange="civiliteWidget(this.options[this.selectedIndex].text,'divnomjeunefille_mod_up');">
                        <option value="">Civilité</option>
                        {foreach from=$tabListeCivilite item=tabLC name=stabListeCivilite}
                            <option value="{$tabLC.id_civilite}">{$tabLC.abreviation_civilite}</option>
                        {/foreach}
                    </select>
                </div>
            </div>
          <div class="col-sm-5 controls">
            <input type="text" placeholder="Nom" name="idaff_nom" id="idaff_nom" value="{$idaff_nom}" required class="required input-majuscule" autocomplete="new-password" />
            <input type="hidden" name="idpatient" id="id_patient">
            {literal}
              <!-- Script pour l'auto-completion -->
              <script type="text/javascript" >
                $('#idaff_nom').autocomplete({
                    serviceUrl:'ajax/patient_auto_complete.php',
                    onSelect: function (suggestion){


                     // var civilite_mod_up1 = document.getElementById('civilite_mod_up1');
                     // var civilite_mod_up2 = document.getElementById('civilite_mod_up2');

                      document.getElementById('id_patient').value = suggestion.id;
                         /*
                      if(suggestion.genre=="Mme"){
                        $('input:radio[name="genre"]').filter('[value="Mme"]').attr('checked', true);
                        civiliteClickModal(civilite_mod_up2);
                      }else{
                        $('input:radio[name="genre"]').filter('[value="M"]').attr('checked', true);
                        civiliteClickModal(civilite_mod_up1);
                      }
*/
                        $('#civilite_mod_up').val(suggestion.id_civilite);

                        $('#selectassurance').empty();
                      $('#selectassurance').append('<option value="">Choisissez votre assurance</option>');
                      $.ajax({
                        url: 'ajax/liste_assurance.php',
                        dataType: 'json',
                        success: function(json) {
                          $.each(json, function(index, value) {
                            $('#selectassurance').append('<option value="'+ value.id_assurance_maladie +'">'+ value.libelle_assurance_maladie +'</option>');
                          });
                          selectassurance.value = suggestion.id_assurance_user;
                        }
                      });

                      document.getElementById('idaff_nom').value = suggestion.nom;
                      document.getElementById('nom_fille_mod_up').value = suggestion.nom_jeune_fille_user;
                      document.getElementById('idaff_prenon').value = suggestion.prenom;
                      document.getElementById('idaff_telport').value = suggestion.telmobile;
                      document.getElementById('idaff_telfixe').value = suggestion.telfixe;
                      document.getElementById('idaff_email').value = suggestion.email;
                      document.getElementById('id_datenaissance').value = suggestion.datenaissance;

                      document.getElementById('adresse_mod_up').value = suggestion.adresse_user;
                      document.getElementById('code_postal_mod_up').value = suggestion.code_postal_user;
                      document.getElementById('ville_mod_up').value = suggestion.ville_user;
                      document.getElementById('num_secu_mod_up').value = suggestion.num_securite_sociale_user;
                      document.getElementById('selectassurance').value = suggestion.libelle_assurance_maladie;
                      document.getElementById('medecintrait').value = suggestion.medecin_traitant_user;
                      document.getElementById('ville_medecin_mod_up').value = suggestion.ville_medecin;
                      document.getElementById('profession_mod_up').value = suggestion.profession_user;
                     // document.getElementById('remarque').value = suggestion.remarque_user;


                      var div_reinit = document.getElementById('div_reinit');

                      if(document.getElementById('idaff_nom')!=""){
                        div_reinit.style.display = "";
                      }else{
                        div_reinit.style.display = "none";
                      }
                      
                      document.getElementById('idaff_prenon').disabled = 'disabled';
                      document.getElementById('idaff_nom').disabled = 'disabled';
                      document.getElementById('nom_fille_mod_up').disabled = 'disabled';
                      document.getElementById('idaff_telport').disabled = 'disabled';
                      document.getElementById('idaff_telfixe').disabled = 'disabled';
                      document.getElementById('idaff_email').disabled = 'disabled';
                      document.getElementById('id_datenaissance').disabled = 'disabled';
                      document.getElementById('civilite_mod_up').disabled = 'disabled';
                      //document.getElementById('civilite_mod_up1').disabled = 'disabled';
                      //document.getElementById('civilite_mod_up2').disabled = 'disabled';
                      document.getElementById('adresse_mod_up').disabled = 'disabled';
                      document.getElementById('code_postal_mod_up').disabled = 'disabled';
                      document.getElementById('ville_mod_up').disabled = 'disabled';
                      document.getElementById('num_secu_mod_up').disabled = 'disabled';
                      document.getElementById('selectassurance').disabled = 'disabled';
                      document.getElementById('medecintrait').disabled = 'disabled';
                      document.getElementById('ville_medecin_mod_up').disabled = 'disabled';
                      document.getElementById('profession_mod_up').disabled = 'disabled';
                      //document.getElementById('remarque').disabled = 'disabled';
                      
                      $("#idaff_telport").mask("99 99 99 99 99");
                      $("#idaff_telfixe").mask("99 99 99 99 99");
                      $("#num_secu_mod_up").mask("9 99 99 9* 999 999 99");
                      $("#id_datenaissance").mask("99/99/9999");
                      $("#id_daterdv").mask("99/99/9999");
                      $("#heuredebut").mask("99:99");
                      $("#heurepatient").mask("99:99");
                      $("#code_postal_mod_up").mask("99999");


                    }
                });
              </script>
            {/literal}
          </div>
          <div class="col-sm-4 controls">
            <input type="text" placeholder="Prénom" name="prenom" id="idaff_prenon" value="{$prenom}" class="input-first-letter" />
          </div>
        </div>
        <div class="form-group" id='divnomjeunefille_mod_up' style='display:none;'>
          <div class="col-sm-12 controls">
            <input type="text" placeholder="Nom de naissance" name="nom_fille_mod_up" value="{$nom_fille_mod_up}" id="nom_fille_mod_up" class="input-majuscule" />
          </div>
        </div>
        <div class="form-group">
          <div class="col-sm-12 controls">
            <input type="text" placeholder="Adresse" name="adresse_mod_up" value="{$adresse_mod_up}" id="adresse_mod_up"/>
          </div>
        </div>
        <div class="form-group">
          <div class="col-sm-6 controls">
            <input type="text" placeholder="Code postal" name="code_postal_mod_up" id="code_postal_mod_up" value="{$code_postal_mod_up}" />
          </div>
          <div class="col-sm-6 controls">
            <input type="text" placeholder="Ville" name="ville_mod_up" id="ville_mod_up" value="{$ville_mod_up}" class="input-majuscule" />
          </div>
        </div>

        <div class="form-group">
          <div class="col-sm-6 controls">
            <input type="text" placeholder="Téléphone mobile" name="telport" id="idaff_telport" value="{$telport}" />
          </div>
          <div class="col-sm-6 controls">
            <input type="text" placeholder="Téléphone fixe" name="telfixe" id="idaff_telfixe" value="{$telfixe}" />
          </div>
        </div>

         <div class="form-group">
          <div class="col-sm-12 controls">
            <input type="email" placeholder="Email" name="email" id="idaff_email" value="{$email}"/>
          </div>
        </div>
        <div class="form-group">
          <div class="col-sm-4 controls">
            <div class="input-group">
              <input type="text" placeholder="Date de naissance" value="{$datenaissance}" name="datenaissance" id="id_datenaissance">
              <span class="input-group-addon" id="datepicker-icon-trigger" data-datepicker="#id_datenaissance">
                <i class="fa fa-calendar"></i>
              </span>
            </div>
          </div>
          {literal}
          <script type="text/javascript">
            $(document).ready(function() {
              $( "#id_datenaissance" ).datepicker({ dateFormat: 'dd/mm/yy',changeMonth: true,changeYear: true,yearRange: "-100:+0"});
              $( '[data-datepicker]' ).click(function(e){ 
                var data=$(this).data('datepicker');
                $(data).focus();
              });
            });
          </script>
          {/literal}
          <div class="col-sm-4 controls">
            <input type="text" onkeyup="checkInsee(this);" placeholder="N° de sécurité sociale" value="{$num_secu_mod_up}" name="num_secu_mod_up" id="num_secu_mod_up" />
          </div>
          <div class="col-sm-4 controls">
            <select id="selectassurance" name="selectassurance"></select>
          </div>
        </div>
        <div class="form-group">
          <div class="col-sm-6 controls">
            <input type="text" placeholder="Médecin traitant" name="medecintrait" id="medecintrait" value="{$medecintrait}" />
          </div>
          <div class="col-sm-6 controls">
            <input type="text" placeholder="Ville du médecin" name="ville_medecin_mod_up" id="ville_medecin_mod_up" value="{$ville_medecin_mod_up}" />
          </div>
        </div>
        <div class="form-group">
          <div class="col-sm-12 controls">
            <input type="text" placeholder="Profession" name="profession_mod_up" value="{$profession_mod_up}" id="profession_mod_up"/>
          </div>
        </div>
        <div class="form-group">
          <div class="col-sm-12 controls">
            <textarea placeholder="Remarque" name="remarque" id="remarque">{$remarque}</textarea>
          </div>
        </div>
        <div class="form-group" id="div_button_base">
          <div class="col-sm-12 controls" align="center">
            <button type="submit" name="updateButtonvalide" id="updateButtonvalide" class="btn vd_btn vd_bg-yellow"><span class="menu-icon"></span>Valider</button>&nbsp;&nbsp;
            <button type="button" name="updateButton1" id="updateButton1" onclick="parent.close_modal_principal('','')" class="btn vd_btn vd_bg-grey"><span class="menu-icon"></span> Fermer</button>
          </div>
        </div>
        <div class="form-group"  id="div_button_update_patient" style="display:none;">
            <div class="col-sm-12 controls" align="center">
                <button type="button" name="updateButtonPatient" id="updateButtonPatient" class="btn vd_btn vd_bg-blue"><span class="menu-icon"></span>Modifier</button>
                </div>
        </div>
      </form>
    {else}
      <div class="form-group">
        <div class="col-sm-12 controls" align="center">
          <button type="button" name="updateButton" id="updateButton" onclick="parent.close_modal_principal('','')" class="btn vd_btn vd_bg-grey"><span class="menu-icon"></span> Fermer</button>
        </div>
      </div>
    {/if}
  </div>
</body>
</html>