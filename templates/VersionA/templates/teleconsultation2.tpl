<!DOCTYPE html>
<!--[if IE 8]>
<html class="ie ie8"> <![endif]-->
<!--[if IE 9]>
<html class="ie ie9"> <![endif]-->
<!--[if gt IE 9]><!-->
<html><!--<![endif]-->


<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>Alaxione</title>
    <meta name="keywords" content=""/>
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Set the viewport width to device width for mobile -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <!-- Fav and touch icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="img/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="img/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="img/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="img/ico/apple-touch-icon-57-precomposed.png">
    <link rel="shortcut icon" href="img/ico/favicon.png">


    <!-- CSS -->

    <!-- Bootstrap & FontAwesome & Entypo CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <!--[if IE 7]>
    <link type="text/css" rel="stylesheet" href="css/font-awesome-ie7.min.css"><![endif]-->
    <link href="css/font-entypo.css" rel="stylesheet" type="text/css">

    <!-- Fonts CSS -->
    <link href="css/fonts.css" rel="stylesheet" type="text/css">

    <!-- Plugin CSS -->
    <link href="plugins/jquery-ui/jquery-ui.custom.min.css" rel="stylesheet" type="text/css">
    <link href="plugins/prettyPhoto-plugin/css/prettyPhoto.css" rel="stylesheet" type="text/css">
    <link href="plugins/isotope/css/isotope.css" rel="stylesheet" type="text/css">
    <link href="plugins/pnotify/css/jquery.pnotify.css" media="screen" rel="stylesheet" type="text/css">
    <link href="plugins/google-code-prettify/prettify.css" rel="stylesheet" type="text/css">


    <link href="plugins/mCustomScrollbar/jquery.mCustomScrollbar.css" rel="stylesheet" type="text/css">
    <link href="plugins/tagsInput/jquery.tagsinput.css" rel="stylesheet" type="text/css">
    <link href="plugins/bootstrap-switch/bootstrap-switch.css" rel="stylesheet" type="text/css">
    <link href="plugins/daterangepicker/daterangepicker-bs3.css" rel="stylesheet" type="text/css">
    <link href="plugins/bootstrap-timepicker/bootstrap-timepicker.min.css" rel="stylesheet" type="text/css">
    <link href="plugins/colorpicker/css/colorpicker.css" rel="stylesheet" type="text/css">
    <!-- Specific CSS -->
    <link href="plugins/dataTables/css/jquery.dataTables.min.css" rel="stylesheet" type="text/css">
    <link href="plugins/dataTables/css/dataTables.bootstrap.css" rel="stylesheet" type="text/css">
    <link href="plugins/jquery-file-upload/css/jquery.fileupload.css" rel="stylesheet" type="text/css">
    <link href="plugins/jquery-file-upload/css/jquery.fileupload-ui.css" rel="stylesheet" type="text/css">
    <link href="plugins/bootstrap-wysiwyg/css/bootstrap-wysihtml5-0.0.2.css" rel="stylesheet" type="text/css">
    <link href='plugins/fullcalendar-2.3.1/fullcalendar.css' rel='stylesheet'/>
    <link href='plugins/fullcalendar-2.3.1/fullcalendar.print.css' rel='stylesheet' media='print'/>
    <!-- Theme CSS -->
    <link href="css/theme.css" rel="stylesheet" type="text/css">
    <!--[if IE]>
    <link href="css/ie.css" rel="stylesheet"> <![endif]-->
    <link href="css/chrome.css" rel="stylesheet" type="text/chrome"> <!-- chrome only css -->


    <!-- Responsive CSS -->
    <link href="css/theme-responsive.min.css" rel="stylesheet" type="text/css">


    <!-- for specific page in style css -->

    <!-- for specific page responsive in style css -->


    <!-- Custom CSS -->
    <link href="custom/custom.css" rel="stylesheet" type="text/css">

    {literal}
        <style type="text/css">
            .autocomplete-suggestions {
                border: 1px solid #999;
                background: #FFF;
                overflow: auto;
            }

            .autocomplete-suggestion {
                padding: 2px 5px;
                white-space: nowrap;
                overflow: hidden;
            }

            .autocomplete-selected {
                background: #F0F0F0;
            }

            .autocomplete-suggestions strong {
                font-weight: normal;
                color: #3399FF;
            }

            .vd_menu-search .vd_menu-search-submit2 {
                position: absolute;
                top: 0;
                right: 0;
                background: #27A1C2;
                color: #FFF;
                padding: 2px 8px;
                -webkit-border-radius: 30px;
                -moz-border-radius: 30px;
                border-radius: 30px;
            }

            .vd_menu-search {
                width: 450px;
            }

            select {

                height: 39px;
            }


            .table-responsive {
                overflow-x: auto;
            }


            /**
     * The CSS shown here will not be introduced in the Quickstart guide, but shows
     * how you can use CSS to style your Element's container.
     */
            .StripeElement {
                box-sizing: border-box;

                height: 40px;

                padding: 10px 12px;

                border: 1px solid transparent;
                border-radius: 4px;
                background-color: white;

                box-shadow: 0 1px 3px 0 #e6ebf1;
                -webkit-transition: box-shadow 150ms ease;
                transition: box-shadow 150ms ease;
            }

            .StripeElement--focus {
                box-shadow: 0 1px 3px 0 #cfd7df;
            }

            .StripeElement--invalid {
                border-color: #fa755a;
            }

            .StripeElement--webkit-autofill {
                background-color: #fefde5 !important;
            }


            .success,
            .error {
                display: none;
            }

            .success.visible,
            .error.visible {
                display: inline;
            }
        </style>
        <script src='plugins/fullcalendar-2.3.1/lib/jquery.min.{$fullcalendar}.js'></script>
        <!-- Head SCRIPTS -->
        <script type="text/javascript" src="js/modernizr.{$modernizr}.js"></script>
        <script type="text/javascript" src="js/mobile-detect.min.{$mobileDetect}.js"></script>
        <script type="text/javascript" src="js/mobile-detect-modernizr.{$mobileDetectModernizr}.js"></script>
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
        <script type="text/javascript" src="js/html5shiv.js"></script>
        <script type="text/javascript" src="js/respond.min.js"></script>
        <![endif]-->


        <!-- Javascript =============================================== -->
        <!-- Placed at the end of the document so the pages load faster -->

        <!--[if lt IE 9]>
        <script type="text/javascript" src="js/excanvas.js"></script>
        <![endif]-->
        <script type="text/javascript" src="js/bootstrap.min.{$bootstrap}.js"></script>
        <script type="text/javascript" src='plugins/jquery-ui/jquery-ui.custom.min.{$jquery}.js'></script>
        <script type="text/javascript" src="plugins/jquery-ui-touch-punch/jquery.ui.touch-punch.min.{$jqueryTouch}.js"></script>
        <script type="text/javascript" src="js/caroufredsel.{$caroufredsel}.js"></script>
        <script type="text/javascript" src="js/plugins.{$plugin}.js"></script>
        <script type="text/javascript" src="js/framwork_js.{$framwork}.js"></script>
        <!-- Script pour l'auto-completion -->
        <script type="text/javascript" src="js/jquery.autocomplete.min.{$autocomplete}.js"></script>
        <script type="text/javascript" src="plugins/breakpoints/breakpoints.{$breakpoints}.js"></script>
        <script type="text/javascript" src="plugins/dataTables/jquery.dataTables.min.{$dataTables}.js"></script>
        <script type="text/javascript" src="plugins/prettyPhoto-plugin/js/jquery.prettyPhoto.{$prettyPhoto}.js"></script>
        <script type="text/javascript" src="plugins/mCustomScrollbar/jquery.mCustomScrollbar.concat.min.{$mCustomScrollbar}.js"></script>
        <script type="text/javascript" src="plugins/tagsInput/jquery.tagsinput.min.{$tagsInput}.js"></script>
        <script type="text/javascript" src="plugins/bootstrap-switch/bootstrap-switch.min.{$switch}.js"></script>
        <script type="text/javascript" src="plugins/blockUI/jquery.blockUI.{$blockUI}.js"></script>
        <script type="text/javascript" src="plugins/pnotify/js/jquery.pnotify.min.{$pnotify}.js"></script>
        <script type="text/javascript" src="js/theme.{$theme}.js"></script>
        <script type="text/javascript" src="custom/custom.{$custom}.js"></script>

    {/literal}
</head>

<body id="pages"
      class="full-layout no-nav-left no-nav-right  nav-top-fixed background-login     responsive remove-navbar login-layout   clearfix"
      data-active="pages " data-smooth-scrolling="1">
<div class="vd_body">
    <!-- Header Start -->

    <!-- Header Ends -->
    <div class="content">
        <div class="container">

            <!-- Middle Content Start -->

            <div class="vd_content-wrapper">
                <div class="vd_container">
                    <div class="vd_content clearfix">
                        <div class="vd_content-section clearfix">

                            {if $successMessage!= ""}
                                <div class="alert alert-success"><span class="vd_alert-icon"><i class="fa fa-check-circle vd_green"></i></span>
                                    {$successMessage}
                                </div>

                            {/if}

                            {if $errorMessage!= ""}
                                <div class="alert alert-danger"><span class="vd_alert-icon"><i class="fa fa-exclamation-circle vd_red"></i></span>
                                    {$errorMessage}
                                </div>

                            {/if}

                            {if $successMessage == "" && $errorMessage == "" }
                                <div class="col-md-12">
                                    <div class="panel widget">

                                        <div class="panel-heading vd_bg-blue">
                                            <h3 class="panel-title">Information Bancaire</h3>
                                        </div>
                                        <div class="panel-body" style="background-color: #ffffff">

                                            <form class="my-form" action="" method="POST" enctype="multipart/form-data">
                                                <input type="hidden" name="identifiant_user" id="identifiant_user" value="{$identifiant_user}">
                                                <input type="hidden" name="token-account" id="token-account">
                                                <input type="hidden" name="token-person" id="token-person">
                                                <input type="hidden" name="token-bank" id="token-bank">
                                                <div class="form-row col-md-8">
                                                    <div class="form-row">
                                                        <label>Société : </label>
                                                        <input type="text" class="inp-company-name" value="nom société">
                                                    </div>
                                                    <div class="form-row">
                                                        <label>SIREN : </label>
                                                        <input type="text" class="inp-company-siren" value="811197557">
                                                    </div>
                                                    <div class="form-row">
                                                        <label>Téléphone : </label>
                                                        <input type="text" class="inp-company-tel" value="0663330152">
                                                    </div>
                                                    <div class="form-row">
                                                        <label>Site Web : </label>
                                                        <input type="text" class="inp-company-url" value="https://alaxione.fr">
                                                    </div>
                                                        <legend>Adresse de la Société</legend>
                                                        <div class="form-row">
                                                            <label>Adresse</label>
                                                            <input type="text" class="inp-company-street-address1" value="adresse société">
                                                        </div>
                                                            <div class="form-row">
                                                            <label>Code Postal</label>
                                                            <input type="text" class="inp-company-zip" value="66000">
                                                        </div>
                                                        <div class="form-row">
                                                            <label>Ville</label>
                                                            <input type="text" class="inp-company-city" value="Perpignan">
                                                        </div>
                                                    <div class="form-row">
                                                        <label>Nom du représentant</label>
                                                        <input type="text" class="inp-person-first-name" value="DUPONT">
                                                    </div>
                                                    <div class="form-row">
                                                        <label>Prénom du représentant</label>
                                                        <input type="text" class="inp-person-last-name" value="Jean">
                                                    </div>
                                                    <div class="form-row">
                                                        <label>Tel du représentant</label>
                                                        <input type="text" class="inp-person-tel" value="+33663330152">
                                                    </div>
                                                    <div class="form-row">
                                                        <label>Email du représentant</label>
                                                        <input type="text" class="inp-person-email" value="y.vendrell@alaxione.fr">
                                                    </div>
                                                    <div class="form-row">
                                                        <label>Intitulé du poste du représentant</label>
                                                        <input type="text" class="inp-person-poste" value="PDG">
                                                    </div>
                                                    <div class="form-row">
                                                        <label>Date de naissance du représentant</label>
                                                        <input type="text" class="inp-person-ddn-jour" value="26">
                                                        <input type="text" class="inp-person-ddn-mois" value="06">
                                                        <input type="text" class="inp-person-ddn-annee" value="1981">
                                                    </div>
                                                        <legend>Adresse du représentant</legend>
                                                        <div class="form-row">
                                                            <label>Adresse</label>
                                                            <input type="text" class="inp-person-street-address1"  value="adresse representant">
                                                        </div>
                                                        <div class="form-row">
                                                            <label>Code Postal</label>
                                                            <input type="text" class="inp-person-zip" value="66000">
                                                        </div>
                                                        <div class="form-row">
                                                            <label>Ville</label>
                                                            <input type="text" class="inp-person-city" value="Perpignan">
                                                        </div>
                                                    <div class="form-row">
                                                        <label>Piece identité recto</label>
                                                        <input type="file" class="inp-person-city" value="">
                                                    </div>
                                                    <div class="form-row">
                                                        <label>Piece identité verso</label>
                                                        <input type="file" class="inp-person-city" value="">
                                                    </div>
                                                    <fieldset>
                                                        <legend>Information Bancaire</legend>
                                                        <div class="form-row">
                                                            <label for="country">Pays : </label>
                                                            <select id="country">
                                                                <option value="FR" selected>France</option>
                                                            </select>
                                                        </div>
                                                        <div class="form-row">
                                                            <label for="account-holder-name">Titulaire du compte :</label>
                                                            <input type="text" id="account-holder-name" value="test" />
                                                        </div>
                                                        <div class="form-row">
                                                            <label for="account-number">IBAN :</label>
                                                            <input type="text" id="account-number" value="FR89370400440532013000" />
                                                        </div>

                                                        <div class="form-row">
                                                            <label for="account-holder-type">Type de compte : </label>
                                                            <select id="account-holder-type">
                                                                <option value="individual">Individuel</option>
                                                                <option value="company" selected>Entreprise</option>
                                                            </select>
                                                        </div>
                                                    </fieldset>
                                                </div>
                                                <div class="form-row col-md-4" style="text-align: center">
                                                    <button type="submit" class="btn vd_bg-green vd_white width-50">Enregistrer les informations Bancaire</button>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            {/if}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript" src="https://js.stripe.com/v3/"></script>
{if $successMessage == "" && $errorMessage == "" }
{literal}
<script>

    const stripe = Stripe('{/literal}{$key_stripe}{literal}');
    const myForm = document.querySelector('.my-form');
    myForm.addEventListener('submit', handleForm);

    async function handleForm(event) {
        event.preventDefault();

        const accountResult = await stripe.createToken('account', {
            business_type: 'company',
            company: {
                name: document.querySelector('.inp-company-name').value,
                address: {
                    line1: document.querySelector('.inp-company-street-address1').value,
                    city: document.querySelector('.inp-company-city').value,
                    postal_code: document.querySelector('.inp-company-zip').value,
                },
                phone: document.querySelector('.inp-company-tel').value,
                tax_id: document.querySelector('.inp-company-siren').value,
            },
            /*business_profile: {
                support_phone: document.querySelector('.inp-company-tel').value,
                support_url: document.querySelector('.inp-company-url').value,
                url: document.querySelector('.inp-company-url').value,
                mcc: '8099',
            },*/
            tos_shown_and_accepted: true,

        });

        const personResult = await stripe.createToken('person', {
            person: {
                first_name: document.querySelector('.inp-person-first-name').value,
                last_name: document.querySelector('.inp-person-last-name').value,
                email: document.querySelector('.inp-person-email').value,
                phone: document.querySelector('.inp-person-tel').value,
                address: {
                    line1: document.querySelector('.inp-person-street-address1').value,
                    city: document.querySelector('.inp-person-city').value,
                    postal_code: document.querySelector('.inp-person-zip').value,
                },
                relationship: {
                    director: true,
                    representative: true,
                    owner: true,
                    percent_ownership: 100,
                    title: document.querySelector('.inp-person-poste').value,
                },
                dob: {
                    day: document.querySelector('.inp-person-ddn-jour').value,
                    month: document.querySelector('.inp-person-ddn-mois').value,
                    year: document.querySelector('.inp-person-ddn-annee').value
                },
            },
        });

        const bankResult = await stripe.createToken('bank_account', {
            country: document.getElementById('country').value,
            currency: 'EUR',
            account_number: document.getElementById('account-number').value,
            account_holder_name: document.getElementById('account-holder-name').value,
            account_holder_type: document.getElementById('account-holder-type').value,

        });

        if (accountResult.token && personResult.token) {
            document.querySelector('#token-account').value = accountResult.token.id;
            document.querySelector('#token-person').value = personResult.token.id;
            document.querySelector('#token-bank').value = bankResult.token.id;
            myForm.submit();
        }
    }

</script>
{/literal}
{/if}
</body>
</html>